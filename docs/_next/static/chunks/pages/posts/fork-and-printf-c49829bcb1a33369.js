(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[727],{312:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/posts/fork-and-printf",function(){return n(7351)}])},8052:function(e,t,n){"use strict";var a=n(1527),r=n(2990),o=n.n(r);t.Z={footer:(0,a.jsxs)("small",{style:{display:"block",marginTop:"8rem"},className:"jsx-32c93ddbf1759959",children:[(0,a.jsx)("abbr",{title:"This site and all its content are licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.",style:{cursor:"help"},className:"jsx-32c93ddbf1759959",children:"CC BY-NC 4.0"})," ",(0,a.jsx)("time",{dateTime:new Date().toISOString(),className:"jsx-32c93ddbf1759959",children:new Date().getFullYear()})," ","\xa9 donaldnevermore.",(0,a.jsx)("a",{href:"/feed.xml",className:"jsx-32c93ddbf1759959",children:"RSS"}),(0,a.jsx)(o(),{id:"32c93ddbf1759959",children:"a.jsx-32c93ddbf1759959{float:right}@media screen and (max-width:480px){article.jsx-32c93ddbf1759959{padding-top:2rem;padding-bottom:4rem}}"})]}),head:e=>{let{title:t,meta:n}=e;return(0,a.jsxs)(a.Fragment,{children:[n.description&&(0,a.jsx)("meta",{name:"description",content:n.description}),n.tag&&(0,a.jsx)("meta",{name:"keywords",content:n.tag}),n.author&&(0,a.jsx)("meta",{name:"author",content:n.author})]})},readMore:"Read More â†’",postFooter:(0,a.jsx)("a",{href:"https://github.com/donaldnevermore/donaldnevermore.github.io/issues",target:"_blank",children:"Reply to this post on GitHub"}),darkMode:!0}},7351:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return d.ZP}});var a,r=n(1527),o=n(3991),s=n(8052);n(9738);var i=n(313);n(9855);var d=n(911);let l={filePath:"pages/posts/fork-and-printf.mdx",route:"/posts/fork-and-printf",frontMatter:{title:"fork and printf",date:"2021-04-23T00:00:00.000Z",tag:"OS"},pageMap:[{kind:"MdxPage",name:"index",route:"/",frontMatter:{type:"page",title:"About",date:"2020-01-01T00:00:00.000Z"}},{kind:"Folder",name:"posts",route:"/posts",children:[{kind:"MdxPage",name:"fork-and-printf",route:"/posts/fork-and-printf",frontMatter:{title:"fork and printf",date:"2021-04-23T00:00:00.000Z",tag:"OS"}},{kind:"MdxPage",name:"index",route:"/posts",frontMatter:{type:"posts",title:"Thoughts",date:"2020-01-03T00:00:00.000Z"}},{kind:"MdxPage",name:"the-raven",route:"/posts/the-raven",frontMatter:{title:"The Raven",date:"2021-04-05T00:00:00.000Z",tag:"poems"}},{kind:"MdxPage",name:"the-road-not-taken",route:"/posts/the-road-not-taken",frontMatter:{title:"The Road Not Taken",date:"2021-04-09T00:00:00.000Z",tag:"poems"}},{kind:"MdxPage",name:"twenty-lessons",route:"/posts/twenty-lessons",frontMatter:{title:"Twenty Lessons on Fighting Tyranny from the Twentieth Century",date:"2021-01-07T00:00:00.000Z",tag:"politics"}},{kind:"Meta",data:{"fork-and-printf":"fork and printf","the-road-not-taken":"The Road Not Taken","the-raven":"The Raven","twenty-lessons":"Twenty Lessons on Fighting Tyranny from the Twentieth Century",index:"Thoughts"}}]},{kind:"Folder",name:"tags",route:"/tags",children:[{kind:"MdxPage",name:"[tag]",route:"/tags/[tag]",frontMatter:{type:"tag"}},{kind:"Meta",data:{"[tag]":"[tag]"}}]},{kind:"Meta",data:{index:"About",posts:"Posts",tags:"Tags"}}],headings:[],timestamp:167282011e4,flexsearch:{codeblocks:!0},readingTime:{text:"1 min read",minutes:.935,time:56100,words:187}};function c(e){let t=Object.assign({p:"p",code:"code",div:"div",pre:"pre",span:"span"},(0,i.ah)(),e.components);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)(t.p,{children:[(0,r.jsx)(t.code,{children:"fork()"})," is non-deterministic, and sometime this can be a real problem. To solve this kind of problem, you may need to rely on your previous experience."]}),"\n",(0,r.jsxs)(t.p,{children:["One day when experimenting on ",(0,r.jsx)(t.code,{children:"fork()"}),", I got a strange print message:"]}),"\n",(0,r.jsx)(t.div,{"data-rehype-pretty-code-fragment":"",children:(0,r.jsx)(t.pre,{"data-language":"c","data-theme":"default",value:'"int main() {}\\n"',children:(0,r.jsx)(t.code,{"data-language":"c","data-theme":"default",children:(0,r.jsxs)(t.span,{className:"line",children:[(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-keyword)"},children:"int"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:" "}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-token-function)"},children:"main"}),(0,r.jsx)(t.span,{style:{color:"var(--shiki-color-text)"},children:"() {}"})]})})})}),"\n",(0,r.jsx)(t.p,{children:"I was surprised and could not figure out why for a while. Since I am using CLion and WSL 2, I soon realized that maybe it was the fault of CLion. So I ran the executable myself. A different print message came to my eyes."}),"\n",(0,r.jsx)(t.p,{children:"No wonder."}),"\n",(0,r.jsx)(t.p,{children:"After a long time of thinking, I related to procedures of how shells work. When you type in a command and hit enter, the shell program first creates a process to run that command. The control soon returns to the shell after the command program is finished. However, if the command program creates a subprocess, and the subprocess is still running even if the main process has already returned, this can happen."}),"\n",(0,r.jsxs)(t.p,{children:["In order to check my assumption, I decided to ",(0,r.jsx)(t.code,{children:"wait()"})," for the child process to finish. And this time it worked perfectly."]}),"\n",(0,r.jsx)(t.p,{children:"Be careful of the environment you are using. Search the database in your brain."})]})}function h(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},{wrapper:t}=Object.assign({},(0,i.ah)(),e.components);return t?(0,r.jsx)(t,{...e,children:(0,r.jsx)(c,{...e})}):c(e)}globalThis.__nextra_internal__={pageMap:l.pageMap,route:l.route},l.title="fork and printf";let p=e=>(0,r.jsx)(o.mK.Provider,{value:e,children:(0,r.jsx)(h,{})});(a=globalThis).__nextra_pageContext__||(a.__nextra_pageContext__=Object.create(null)),globalThis.__nextra_pageContext__["/posts/fork-and-printf"]={Content:p,pageOpts:l,themeConfig:s.Z}}},function(e){e.O(0,[34,774,888,179],function(){return e(e.s=312)}),_N_E=e.O()}]);